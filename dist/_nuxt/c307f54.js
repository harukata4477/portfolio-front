(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{689:function(e,t,n){"use strict";n.r(t);var o=n(18),r=(n(102),n(694)),d=r.GraphObject.make,c={components:{},props:{params:{type:String,default:""}},computed:{setParams:{get:function(){return this.params},set:function(e){return this.$emit("update:params",e)}}},data:function(){return{nodes:[]}},mounted:function(){var e=this,t=d(r.Diagram,"myDiagramDiv",{initialAutoScale:r.Diagram.Uniform,"commandHandler.copiesTree":!0,"commandHandler.copiesParentKey":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0,"undoManager.isEnabled":!0});this.diagram=t;var n=d(r.TreeModel);function o(e,t){return"left"===e?t?r.Spot.Left:r.Spot.Right:t?r.Spot.Right:r.Spot.Left}function c(e,n){t.model.setDataProperty(e.data,"dir",n);for(var o=e.findTreeChildrenNodes();o.next();)c(o.value,n)}function l(e){0===e.data.key?function(){var e=t.findNodeForKey(0);if(null===e)return;t.startTransaction("Layout");var n=new r.Set,o=new r.Set;e.findLinksConnected().each((function(link){var t=link.toNode;"left"===t.data.dir?(o.add(e),o.add(link),o.addAll(t.findTreeParts())):(n.add(e),n.add(link),n.addAll(t.findTreeParts()))})),m(n,0),m(o,180),t.commitTransaction("Layout")}():m(e.findTreeParts(),"left"===e.data.dir?180:0)}function m(e,t){r.GraphObject.make(r.TreeLayout,{angle:t,arrangement:r.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(e)}n.nodeDataArray=this.nodes,t.model=n,t.addDiagramListener("Modified",(function(e){var button=document.getElementById("SaveButton");button&&(button.disabled=!t.isModified);var n=document.title.indexOf("*");t.isModified?n<0&&(document.title+="*"):n>=0&&(document.title=document.title.substr(0,n))})),t.nodeTemplate=d(r.Node,"Vertical",{selectionObjectName:"TEXT"},new r.Binding("location","loc",r.Point.parse).makeTwoWay(r.Point.stringify),new r.Binding("locationSpot","dir",(function(e){return o(e,!1)})),d(r.TextBlock,{name:"TEXT",minSize:new r.Size(30,15),editable:!0},new r.Binding("text","text").makeTwoWay(),new r.Binding("scale","scale").makeTwoWay(),new r.Binding("font","font").makeTwoWay()),d(r.Shape,"LineH",{stretch:r.GraphObject.Horizontal,strokeWidth:3,height:3,portId:"",fromSpot:r.Spot.LeftRightSides,toSpot:r.Spot.LeftRightSides},new r.Binding("stroke","brush"),new r.Binding("fromSpot","dir",(function(e){return o(e,!0)})),new r.Binding("toSpot","dir",(function(e){return o(e,!1)}))),new r.Binding("location","loc",r.Point.parse).makeTwoWay(r.Point.stringify),new r.Binding("locationSpot","dir",(function(e){return o(e,!1)}))),t.nodeTemplate.selectionAdornmentTemplate=d(r.Adornment,"Spot",d(r.Panel,"Auto",d(r.Shape,{fill:null,stroke:"dodgerblue",strokeWidth:3}),d(r.Placeholder,{margin:new r.Margin(4,4,0,4)})),d("Button",{alignment:r.Spot.Right,alignmentFocus:r.Spot.Left,click:function(e,t){var n=t.part,o=n.diagram;o.startTransaction("Add Node");var r=n.adornedPart,d=r.data;if(0==d.key)var c=["palevioletred","coral","darkseagreen","skyblue"],m={text:"idea",brush:c[Math.floor(Math.random()*c.length)],dir:d.dir,parent:d.key};else m={text:"idea",brush:d.brush,dir:d.dir,parent:d.key};o.model.addNodeData(m),l(r),o.commitTransaction("Add Node");var f=o.findNodeForData(m);null!==f&&o.scrollToRect(f.actualBounds)}},d(r.TextBlock,"+",{font:"bold 8pt sans-serif"}))),t.nodeTemplate.contextMenu=d("ContextMenu",d("ContextMenuButton",d(r.TextBlock,"Bold/Normal"),{click:function(e,t){!function(e){var t=e.part;t.diagram.startTransaction("Change Text Weight");var n=t.adornedPart.findObject("TEXT"),o=n.font.indexOf("bold");n.font=o<0?"bold "+n.font:n.font.substr(o+5);t.diagram.commitTransaction("Change Text Weight")}(t)}}),d("ContextMenuButton",d(r.TextBlock,"Copy"),{click:function(e,t){e.diagram.commandHandler.copySelection()}}),d("ContextMenuButton",d(r.TextBlock,"Delete"),{click:function(e,t){e.diagram.commandHandler.deleteSelection()}}),d("ContextMenuButton",d(r.TextBlock,"Undo"),{click:function(e,t){e.diagram.commandHandler.undo()}}),d("ContextMenuButton",d(r.TextBlock,"Redo"),{click:function(e,t){e.diagram.commandHandler.redo()}}),d("ContextMenuButton",d(r.TextBlock,"Layout"),{click:function(e,t){var n=t.part;n.diagram.startTransaction("Subtree Layout"),l(n.adornedPart),n.diagram.commitTransaction("Subtree Layout")}})),t.linkTemplate=d(r.Link,{curve:r.Link.Bezier,fromShortLength:-2,toShortLength:-2,selectable:!1},d(r.Shape,{strokeWidth:3},new r.Binding("stroke","toNode",(function(e){return e.data.brush?e.data.brush:"black"})).ofObject())),t.contextMenu=d("ContextMenu",d("ContextMenuButton",d(r.TextBlock,"Paste"),{click:function(e,t){e.diagram.commandHandler.pasteSelection(e.diagram.toolManager.contextMenuTool.mouseDownPoint)}},new r.Binding("visible","",(function(e){return e.diagram&&e.diagram.commandHandler.canPasteSelection(e.diagram.toolManager.contextMenuTool.mouseDownPoint)})).ofObject()),d("ContextMenuButton",d(r.TextBlock,"Undo"),{click:function(e,t){e.diagram.commandHandler.undo()}},new r.Binding("visible","",(function(e){return e.diagram&&e.diagram.commandHandler.canUndo()})).ofObject()),d("ContextMenuButton",d(r.TextBlock,"Redo"),{click:function(e,t){e.diagram.commandHandler.redo()}},new r.Binding("visible","",(function(e){return e.diagram&&e.diagram.commandHandler.canRedo()})).ofObject())),t.addDiagramListener("SelectionMoved",(function(e){var n=t.findNodeForKey(0).location.x;t.selection.each((function(e){if(0===e.data.parent){var t=e.location.x;n<t&&"right"!==e.data.dir?c(e,"right"):n>t&&"left"!==e.data.dir&&c(e,"left"),l(e)}}))})),this.$axios.$get("api/contents/"+this.params,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")}}).then((function(n){e.nodes=n.data.attributes.content,t.model=new r.Model.fromJson({class:"go.TreeModel",nodeDataArray:e.nodes})}))},methods:{save:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n={room_id:e.params,content:e.nodes},e.$axios.$patch("api/contents/"+e.params,n,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")}});case 2:case"end":return t.stop()}}),t)})))()}}},l=n(55),m=n(65),f=n.n(m),h=n(165),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._m(0),e._v(" "),n("v-btn",{on:{click:e.save}},[e._v("SAVE")])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrapper"},[t("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"myDiagramDiv"}})])}],!1,null,null,null);t.default=component.exports;f()(component,{VBtn:h.a})}}]);