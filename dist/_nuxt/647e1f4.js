(window.webpackJsonp=window.webpackJsonp||[]).push([[27,5,16],{689:function(t,e,n){"use strict";n.r(e);var o=n(18),r=(n(102),n(694)),d=r.GraphObject.make,c={components:{},props:{params:{type:String,default:""}},computed:{setParams:{get:function(){return this.params},set:function(t){return this.$emit("update:params",t)}}},data:function(){return{nodes:[]}},mounted:function(){var t=this,e=d(r.Diagram,"myDiagramDiv",{initialAutoScale:r.Diagram.Uniform,"commandHandler.copiesTree":!0,"commandHandler.copiesParentKey":!0,"commandHandler.deletesTree":!0,"draggingTool.dragsTree":!0,"undoManager.isEnabled":!0});this.diagram=e;var n=d(r.TreeModel);function o(t,e){return"left"===t?e?r.Spot.Left:r.Spot.Right:e?r.Spot.Right:r.Spot.Left}function c(t,n){e.model.setDataProperty(t.data,"dir",n);for(var o=t.findTreeChildrenNodes();o.next();)c(o.value,n)}function l(t){0===t.data.key?function(){var t=e.findNodeForKey(0);if(null===t)return;e.startTransaction("Layout");var n=new r.Set,o=new r.Set;t.findLinksConnected().each((function(link){var e=link.toNode;"left"===e.data.dir?(o.add(t),o.add(link),o.addAll(e.findTreeParts())):(n.add(t),n.add(link),n.addAll(e.findTreeParts()))})),m(n,0),m(o,180),e.commitTransaction("Layout")}():m(t.findTreeParts(),"left"===t.data.dir?180:0)}function m(t,e){r.GraphObject.make(r.TreeLayout,{angle:e,arrangement:r.TreeLayout.ArrangementFixedRoots,nodeSpacing:5,layerSpacing:20,setsPortSpot:!1,setsChildPortSpot:!1}).doLayout(t)}n.nodeDataArray=this.nodes,e.model=n,e.addDiagramListener("Modified",(function(t){var button=document.getElementById("SaveButton");button&&(button.disabled=!e.isModified);var n=document.title.indexOf("*");e.isModified?n<0&&(document.title+="*"):n>=0&&(document.title=document.title.substr(0,n))})),e.nodeTemplate=d(r.Node,"Vertical",{selectionObjectName:"TEXT"},new r.Binding("location","loc",r.Point.parse).makeTwoWay(r.Point.stringify),new r.Binding("locationSpot","dir",(function(t){return o(t,!1)})),d(r.TextBlock,{name:"TEXT",minSize:new r.Size(30,15),editable:!0},new r.Binding("text","text").makeTwoWay(),new r.Binding("scale","scale").makeTwoWay(),new r.Binding("font","font").makeTwoWay()),d(r.Shape,"LineH",{stretch:r.GraphObject.Horizontal,strokeWidth:3,height:3,portId:"",fromSpot:r.Spot.LeftRightSides,toSpot:r.Spot.LeftRightSides},new r.Binding("stroke","brush"),new r.Binding("fromSpot","dir",(function(t){return o(t,!0)})),new r.Binding("toSpot","dir",(function(t){return o(t,!1)}))),new r.Binding("location","loc",r.Point.parse).makeTwoWay(r.Point.stringify),new r.Binding("locationSpot","dir",(function(t){return o(t,!1)}))),e.nodeTemplate.selectionAdornmentTemplate=d(r.Adornment,"Spot",d(r.Panel,"Auto",d(r.Shape,{fill:null,stroke:"dodgerblue",strokeWidth:3}),d(r.Placeholder,{margin:new r.Margin(4,4,0,4)})),d("Button",{alignment:r.Spot.Right,alignmentFocus:r.Spot.Left,click:function(t,e){var n=e.part,o=n.diagram;o.startTransaction("Add Node");var r=n.adornedPart,d=r.data;if(0==d.key)var c=["palevioletred","coral","darkseagreen","skyblue"],m={text:"idea",brush:c[Math.floor(Math.random()*c.length)],dir:d.dir,parent:d.key};else m={text:"idea",brush:d.brush,dir:d.dir,parent:d.key};o.model.addNodeData(m),l(r),o.commitTransaction("Add Node");var f=o.findNodeForData(m);null!==f&&o.scrollToRect(f.actualBounds)}},d(r.TextBlock,"+",{font:"bold 8pt sans-serif"}))),e.nodeTemplate.contextMenu=d("ContextMenu",d("ContextMenuButton",d(r.TextBlock,"Bold/Normal"),{click:function(t,e){!function(t){var e=t.part;e.diagram.startTransaction("Change Text Weight");var n=e.adornedPart.findObject("TEXT"),o=n.font.indexOf("bold");n.font=o<0?"bold "+n.font:n.font.substr(o+5);e.diagram.commitTransaction("Change Text Weight")}(e)}}),d("ContextMenuButton",d(r.TextBlock,"Copy"),{click:function(t,e){t.diagram.commandHandler.copySelection()}}),d("ContextMenuButton",d(r.TextBlock,"Delete"),{click:function(t,e){t.diagram.commandHandler.deleteSelection()}}),d("ContextMenuButton",d(r.TextBlock,"Undo"),{click:function(t,e){t.diagram.commandHandler.undo()}}),d("ContextMenuButton",d(r.TextBlock,"Redo"),{click:function(t,e){t.diagram.commandHandler.redo()}}),d("ContextMenuButton",d(r.TextBlock,"Layout"),{click:function(t,e){var n=e.part;n.diagram.startTransaction("Subtree Layout"),l(n.adornedPart),n.diagram.commitTransaction("Subtree Layout")}})),e.linkTemplate=d(r.Link,{curve:r.Link.Bezier,fromShortLength:-2,toShortLength:-2,selectable:!1},d(r.Shape,{strokeWidth:3},new r.Binding("stroke","toNode",(function(t){return t.data.brush?t.data.brush:"black"})).ofObject())),e.contextMenu=d("ContextMenu",d("ContextMenuButton",d(r.TextBlock,"Paste"),{click:function(t,e){t.diagram.commandHandler.pasteSelection(t.diagram.toolManager.contextMenuTool.mouseDownPoint)}},new r.Binding("visible","",(function(t){return t.diagram&&t.diagram.commandHandler.canPasteSelection(t.diagram.toolManager.contextMenuTool.mouseDownPoint)})).ofObject()),d("ContextMenuButton",d(r.TextBlock,"Undo"),{click:function(t,e){t.diagram.commandHandler.undo()}},new r.Binding("visible","",(function(t){return t.diagram&&t.diagram.commandHandler.canUndo()})).ofObject()),d("ContextMenuButton",d(r.TextBlock,"Redo"),{click:function(t,e){t.diagram.commandHandler.redo()}},new r.Binding("visible","",(function(t){return t.diagram&&t.diagram.commandHandler.canRedo()})).ofObject())),e.addDiagramListener("SelectionMoved",(function(t){var n=e.findNodeForKey(0).location.x;e.selection.each((function(t){if(0===t.data.parent){var e=t.location.x;n<e&&"right"!==t.data.dir?c(t,"right"):n>e&&"left"!==t.data.dir&&c(t,"left"),l(t)}}))})),this.$axios.$get("api/contents/"+this.params,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")}}).then((function(n){t.nodes=n.data.attributes.content,e.model=new r.Model.fromJson({class:"go.TreeModel",nodeDataArray:t.nodes})}))},methods:{save:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={room_id:t.params,content:t.nodes},t.$axios.$patch("api/contents/"+t.params,n,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")}});case 2:case"end":return e.stop()}}),e)})))()}}},l=n(55),m=n(65),f=n.n(m),_=n(165),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._m(0),t._v(" "),n("v-btn",{on:{click:t.save}},[t._v("SAVE")])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"wrapper"},[e("div",{staticStyle:{width:"100%",height:"600px"},attrs:{id:"myDiagramDiv"}})])}],!1,null,null,null);e.default=component.exports;f()(component,{VBtn:_.a})},700:function(t,e,n){var content=n(714);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("23ec6928",content,!0,{sourceMap:!1})},713:function(t,e,n){"use strict";n(700)},714:function(t,e,n){var o=n(10)(!1);o.push([t.i,".mind_map[data-v-7fe0d4a6]{position:relative;font-weight:700}.mind_map_move[data-v-7fe0d4a6]{position:absolute;right:5px;bottom:40px}",""]),t.exports=o},718:function(t,e,n){"use strict";n.r(e);var o=n(689),r={props:{contents:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{judge:!1}},components:{mindmap:o.default}},d=(n(713),n(55)),c=n(65),l=n.n(c),m=n(162),component=Object(d.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mind_map"},[n("mindmap"),t._v(" "),n("div",{staticClass:"mind_map_move"},[t.judge?n("v-icon",{attrs:{color:"info"},on:{click:function(e){t.judge=!t.judge}}},[t._v("mdi-cursor-default")]):n("v-icon",{attrs:{color:"info"},on:{click:function(e){t.judge=!t.judge}}},[t._v("mdi-cursor-default-outline")])],1)],1)}),[],!1,null,"7fe0d4a6",null);e.default=component.exports;l()(component,{Mindmap:n(689).default}),l()(component,{VIcon:m.a})},868:function(t,e,n){var content=n(911);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(11).default)("72152605",content,!0,{sourceMap:!1})},910:function(t,e,n){"use strict";n(868)},911:function(t,e,n){var o=n(10)(!1);o.push([t.i,".post_icon[data-v-60329557]{position:absolute;top:10px;left:0}.post_like p[data-v-60329557]{cursor:pointer}.post_header_title[data-v-60329557]{text-align:center;font-weight:700}.post_header_left[data-v-60329557]{display:flex;align-items:center}.post_header_left p[data-v-60329557]{margin-bottom:5px}.post_header_created_at[data-v-60329557]{display:flex;align-items:center;font-size:12px}.post_header_tag[data-v-60329557]{width:50%;display:flex;overflow:scroll}.post_header_tag_list[data-v-60329557]{white-space:pre;font-size:10px;background-color:#d3eefc;border-radius:5px;font-weight:700;color:grey;margin-left:5px;padding:1px 2px}.post_header_tag_list[data-v-60329557]:first-child{margin-left:auto}.post_content_ttl[data-v-60329557]{font-weight:700;font-size:30px;border-bottom:1px solid rgb(220 218 218)}.post_content_sub-ttl[data-v-60329557]{font-size:23px}.post_content_txt[data-v-60329557]{line-height:1.6}",""]),t.exports=o},949:function(t,e,n){"use strict";n.r(e);var o=n(18),r=(n(35),n(102),n(103)),d=n(718),c={components:{mindmap:n(689).default,VueLoading:r.VueLoading,RoomsMindMap:d.default},data:function(){return{contents:[{}],post:{},title:"",sub_title:"",text:"",picture:"",postContents:[],likes:0,currentUser_id:localStorage.getItem("id"),like_judge:!1,submitAlert:!1,loading:!0}},computed:{apiUrl:function(){return"http://54.248.224.191"}},created:function(){this.index()},methods:{index:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,!localStorage.getItem("id")){e.next=6;break}return e.next=4,t.$axios.$get("api/posts/"+t.$route.params.id,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")}}).then((function(e){t.contents=e.data.attributes.contents.content,t.postContents=e.data.attributes.post_contents;var n=new Date(e.data.attributes.updated_at),o=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate();t.post={id:e.data.attributes.id,user_id:e.data.attributes.user_id,title:e.data.attributes.title,updated_at:o,tag_list:e.data.attributes.tag_list},t.likes=e.data.attributes.likes.length,t.like_judge=e.data.attributes.like_judges,t.loading=!1}));case 4:e.next=7;break;case 6:t.$axios.$get("api/posts/"+t.$route.params.id).then((function(e){t.contents=e.data.attributes.contents.content,t.postContents=e.data.attributes.post_contents;var n=new Date(e.data.attributes.updated_at),o=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate();t.post={id:e.data.attributes.id,user_id:e.data.attributes.user_id,title:e.data.attributes.title,updated_at:o,tag_list:e.data.attributes.tag_list},t.likes=e.data.attributes.likes.length,t.like_judge=e.data.attributes.like_judges,t.loading=!1}));case 7:case"end":return e.stop()}}),e)})))()},likeIndex:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("id")){e.next=6;break}return t.loading=!0,e.next=4,t.$axios.$get("api/posts/"+t.$route.params.id,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")}}).then((function(e){t.likes=e.data.attributes.likes.length,t.like_judge=e.data.attributes.like_judges,t.loading=!1}));case 4:e.next=8;break;case 6:return e.next=8,t.$axios.$get("api/posts/"+t.$route.params.id).then((function(e){t.likes=e.data.attributes.likes.length,t.like_judge=e.data.attributes.like_judges,t.loading=!1}));case 8:case"end":return e.stop()}}),e)})))()},like:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("X-Access-Token")){e.next=8;break}return t.loading=!0,n={post_id:t.$route.params.id,user_id:t.post.user_id},e.next=5,t.$axios.$post("api/likes/",n,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")}});case 5:t.likeIndex(),e.next=9;break;case 8:null==localStorage.getItem("id")&&(t.submitAlert=!0);case 9:case"end":return e.stop()}}),e)})))()},unlike:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("X-Access-Token")){e.next=7;break}return t.loading=!0,e.next=4,t.$axios.$delete("api/likes/"+t.$route.params.id,{headers:{"X-Access-Token":localStorage.getItem("X-Access-Token")}});case 4:t.likeIndex(),e.next=8;break;case 7:null==localStorage.getItem("id")&&(t.submitAlert=!0);case 8:case"end":return e.stop()}}),e)})))()}},watch:{submitAlert:function(t){var e=this;t&&setTimeout((function(){e.submitAlert=!1}),2e3)}}},l=(n(910),n(55)),m=n(65),f=n.n(m),_=n(667),h=n(271),v=n(162),k=n(215),x=n(666),T=n(670),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"post pb-16"},[t.loading?n("div",{staticClass:"loading"},[n("div",{staticClass:"loading_inner"},[n("p",{staticClass:"loading_inner_text"},[t._v("Loading...")]),t._v(" "),n("vue-loading",{staticClass:"loading_inner_mark",attrs:{type:"beat",color:"gold",size:{width:"60px",height:"60px"}}})],1)]):t._e(),t._v(" "),n("v-alert",{staticClass:"alert",attrs:{type:"error",transition:"slide-y-transition"},model:{value:t.submitAlert,callback:function(e){t.submitAlert=e},expression:"submitAlert"}},[t._v("\n    ログインが必要になります。\n  ")]),t._v(" "),t.currentUser_id==t.post.user_id?n("v-icon",{staticClass:"post_icon",attrs:{color:"info"},on:{click:function(e){return t.$router.push("/posts/edits/"+t.$route.params.id)}}},[t._v("mdi-wrench")]):t._e(),t._v(" "),n("v-row",{staticClass:"post_like mt-2 mr-2"},[n("v-spacer"),t._v(" "),t.like_judge?n("p",{staticClass:"mb-0 ml-2",on:{click:t.unlike}},[t._v(t._s(t.likes)),n("v-icon",{staticClass:"pb-1 pl-1",attrs:{color:"orange"}},[t._v("mdi-thumb-up")])],1):n("p",{staticClass:"mb-0 ml-2",on:{click:t.like}},[t._v(t._s(t.likes)),n("v-icon",{staticClass:"pb-1 pl-1",attrs:{color:"gray"}},[t._v("mdi-thumb-up-outline")])],1)],1),t._v(" "),n("div",{staticClass:"post_header"},[n("h1",{staticClass:"post_header_title display-1 mt-5 mb-2"},[t._v(t._s(t.post.title))]),t._v(" "),n("div",{staticClass:"post_header_left"},[n("p",{staticClass:"post_header_created_at grey--text",attrs:{color:"gray"}},[n("v-icon",{staticClass:" mr-1 grey--text",attrs:{"x-small":""}},[t._v("mdi-autorenew")]),t._v(t._s(t.post.updated_at))],1),t._v(" "),n("v-spacer"),t._v(" "),n("div",{staticClass:"post_header_tag"},t._l(t.post.tag_list,(function(e,i){return n("p",{key:"tag-"+i,staticClass:"post_header_tag_list"},[t._v(t._s(e))])})),0)],1)]),t._v(" "),n("rooms-mind-map",{attrs:{contents:t.contents},on:{"update:contents":function(e){t.contents=e}}}),t._v(" "),t._l(t.postContents,(function(content,e){return n("div",{key:"content-"+e,staticClass:"post_content"},["title"==content.kind?n("h2",{staticClass:"post_content_ttl mt-12 mb-10"},[t._v(t._s(content.title))]):"sub_title"==content.kind?n("h3",{staticClass:"post_content_sub-ttl ml-1 mt-6 mb-5",domProps:{textContent:t._s(content.sub_title)}}):"text"==content.kind?n("p",{staticClass:"post_content_txt ml-1 mt-5 mb-5",domProps:{textContent:t._s(content.text)}}):"picture"==content.kind?n("v-card",{staticClass:"mt-12 mb-12",attrs:{flat:""}},[n("v-img",{attrs:{contain:"","max-height":"320",src:""+t.apiUrl+content.picture.url}})],1):t._e()],1)}))],2)}),[],!1,null,"60329557",null);e.default=component.exports;f()(component,{RoomsMindMap:n(718).default}),f()(component,{VAlert:_.a,VCard:h.a,VIcon:v.a,VImg:k.a,VRow:x.a,VSpacer:T.a})}}]);